import * as React from "react";
import { em } from "polished";
import { motion } from "framer-motion";

import { styled } from "../../../gatsby-theme-stitches/stitches.config";

import { Flex } from "../../Flex";
import { RatingType } from "./_type";

const GroupIcon = () => (
  <svg
    width={em(21)}
    viewBox="0 0 21 17"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M12.8337 0.683533C10.03 0.683533 7.75866 2.94495 7.75866 5.7442C7.75866 7.31943 8.4853 8.72607 9.61619 9.65084C7.37103 10.8121 5.83366 13.1456 5.83366 15.8502C5.83366 16.1724 6.09483 16.4335 6.41699 16.4335C6.73916 16.4335 7.00033 16.1724 7.00033 15.8502C7.00033 13.26 8.69523 11.0729 11.0427 10.3162C11.2694 10.2431 11.429 10.0395 11.4456 9.80186C11.4623 9.56422 11.3328 9.34031 11.1185 9.23626C9.82196 8.60676 8.92532 7.27647 8.92532 5.7442C8.92532 3.5928 10.6708 1.8502 12.8337 1.8502C14.9965 1.8502 16.742 3.5928 16.742 5.7442C16.742 7.27632 15.8518 8.60076 14.5479 9.23672C14.3339 9.34106 14.2048 9.56494 14.2217 9.80238C14.2386 10.0398 14.398 10.2432 14.6246 10.3162C16.9717 11.0728 18.667 13.2661 18.667 15.8502C18.667 16.1724 18.9282 16.4335 19.2503 16.4335C19.5725 16.4335 19.8337 16.1724 19.8337 15.8502C19.8337 13.1512 18.2962 10.8132 16.0506 9.65084C17.1845 8.72482 17.9087 7.32119 17.9087 5.7442C17.9087 2.94495 15.6373 0.683533 12.8337 0.683533Z"
      fill="#212124"
    />
    <path
      d="M7.65824 1.88272C7.97776 1.84153 8.20339 1.54912 8.1622 1.22959C8.12102 0.910072 7.8286 0.684437 7.50908 0.725625C5.01614 1.04698 3.09199 3.16763 3.09199 5.74421C3.09199 7.3195 3.81887 8.72626 4.94947 9.65084C2.70452 10.812 1.16699 13.1456 1.16699 15.8502C1.16699 16.1724 1.42816 16.4335 1.75033 16.4335C2.07249 16.4335 2.33366 16.1724 2.33366 15.8502C2.33366 13.3528 3.90915 11.2302 6.12655 10.4029C6.69883 10.1894 6.74096 9.41018 6.22849 9.11867C5.05298 8.44998 4.25866 7.18664 4.25866 5.74421C4.25866 3.76429 5.73718 2.13035 7.65824 1.88272Z"
      fill="#212124"
    />
    <path
      d="M12.8337 0.683533C10.03 0.683533 7.75866 2.94495 7.75866 5.7442C7.75866 7.31943 8.4853 8.72607 9.61619 9.65084C7.37103 10.8121 5.83366 13.1456 5.83366 15.8502C5.83366 16.1724 6.09483 16.4335 6.41699 16.4335C6.73916 16.4335 7.00033 16.1724 7.00033 15.8502C7.00033 13.26 8.69523 11.0729 11.0427 10.3162C11.2694 10.2431 11.429 10.0395 11.4456 9.80186C11.4623 9.56422 11.3328 9.34031 11.1185 9.23626C9.82196 8.60676 8.92532 7.27647 8.92532 5.7442C8.92532 3.5928 10.6708 1.8502 12.8337 1.8502C14.9965 1.8502 16.742 3.5928 16.742 5.7442C16.742 7.27632 15.8518 8.60076 14.5479 9.23672C14.3339 9.34106 14.2048 9.56494 14.2217 9.80238C14.2386 10.0398 14.398 10.2432 14.6246 10.3162C16.9717 11.0728 18.667 13.2661 18.667 15.8502C18.667 16.1724 18.9282 16.4335 19.2503 16.4335C19.5725 16.4335 19.8337 16.1724 19.8337 15.8502C19.8337 13.1512 18.2962 10.8132 16.0506 9.65084C17.1845 8.72482 17.9087 7.32119 17.9087 5.7442C17.9087 2.94495 15.6373 0.683533 12.8337 0.683533Z"
      stroke="#212124"
      stroke-width="0.6"
      stroke-miterlimit="10"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M7.65824 1.88272C7.97776 1.84153 8.20339 1.54912 8.1622 1.22959C8.12102 0.910072 7.8286 0.684437 7.50908 0.725625C5.01614 1.04698 3.09199 3.16763 3.09199 5.74421C3.09199 7.3195 3.81887 8.72626 4.94947 9.65084C2.70452 10.812 1.16699 13.1456 1.16699 15.8502C1.16699 16.1724 1.42816 16.4335 1.75033 16.4335C2.07249 16.4335 2.33366 16.1724 2.33366 15.8502C2.33366 13.3528 3.90915 11.2302 6.12655 10.4029C6.69883 10.1894 6.74096 9.41018 6.22849 9.11867C5.05298 8.44998 4.25866 7.18664 4.25866 5.74421C4.25866 3.76429 5.73718 2.13035 7.65824 1.88272Z"
      stroke="#212124"
      stroke-width="0.6"
      stroke-miterlimit="10"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </svg>
);

interface RatingProps {
  ratings: RatingType[];
}

const Ratings: React.FC<RatingProps> = ({ ratings }) => {
  return (
    <Wrapper
      initial={{ opacity: 0, y: 50 }}
      animate={{ opacity: 1, y: 0 }}
      transition={{
        delay: 2,
        duration: 0.5,
      }}
    >
      <Title>Ratings</Title>
      {ratings.map((rating) => (
        <Flex>
          <Count>
            <GroupIcon></GroupIcon>
            <span>{rating.count}</span>
          </Count>

          <Comment>{rating.comment}</Comment>
        </Flex>
      ))}
    </Wrapper>
  );
};

const Wrapper = styled(motion.div, {
  display: "flex",
  flexDirection: "column",
  padding: em(24),
  background: "white",
  borderRadius: em(24),
  boxShadow: `${em(2)} ${em(6)} ${em(16)} ${em(8)} #00000010`,
  width: em(260),
  "*": {
    fontFamily: "$system",
  },
});

const Title = styled("div", {
  fontSize: em(18),
  fontWeight: "bold",
  marginRight: em(6),
  marginBottom: em(24),
});

const Comment = styled("div", {
  display: "flex",
  position: "relative",
  fontSize: em(16),
  padding: `${em(12)} ${em(22)}`,
  marginBottom: em(14),
  color: "$gray900",
  background: "$gray100",
  borderRadius: `${em(2)}  ${em(100)} ${em(100)} ${em(100)} `,
});

const Count = styled("div", {
  width: em(56),
  display: "flex",
  alignItems: "flex-start",
  span: {
    fontSize: em(14),
    fontWeight: "bold",
    marginLeft: em(4),
  },
});

export default Ratings;
